name: Run CTF from GCS

on:
  push:
    branches:
      - "**"

jobs:
  run-ctf:
    runs-on: ubuntu-latest
    environment: dev   # 👈 must match the environment name in GitHub

    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Check SA secret
        run: |
          if [ -z "${{ secrets.GCP_SA_KEY }}" ]; then
            echo "❌ Secret not available"
            exit 1
          else
            echo "✅ Secret detected"
          fi
